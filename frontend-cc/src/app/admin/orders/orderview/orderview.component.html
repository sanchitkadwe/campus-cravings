<div class="container-fluid d-flex vh-100 p-0">
  <div class="d-flex w-100">
    <!-- Content -->
    <div class="flex-grow-1 p-4">
      <app-orderview></app-orderview>

      <!-- Combined Order Actions -->
      <div class="container py-1 mb-2" style="max-width: 1152px;">
        <div class="card">
          <div class="card-header py-1 border-bottom">
            <h2 class="h6 fw-semibold mb-0">Order Actions</h2>
          </div>
          <div class="card-body p-3">
            <div class="d-flex flex-nowrap align-items-center justify-content-between gap-2">
              <!-- Action Buttons Container -->
              <div class="d-flex flex-nowrap gap-2 flex-grow-1 pe-2" style="min-width: 0;">
                <!-- Initial State (Accept/Reject) -->
                <ng-container *ngIf="!orderStatusChanged">
                  <button class="btn btn-success rounded-pill px-3 px-sm-4 flex-grow-1 flex-sm-grow-0"
                    (click)="onAccept()">
                    <i class="fas fa-check-circle me-1 me-sm-2"></i>
                    <span>Accept</span>
                  </button>
                  <button class="btn btn-danger rounded-pill px-3 px-sm-4 flex-grow-1 flex-sm-grow-0"
                    (click)="onReject()">
                    <i class="fas fa-times-circle me-1 me-sm-2"></i>
                    <span>Reject</span>
                  </button>
                </ng-container>

                <!-- After Accept (Show Delivered) -->
                <ng-container *ngIf="orderStatus === 'accepted'">
                  <button class="btn btn-primary rounded-pill px-3 px-sm-4 flex-grow-1 flex-sm-grow-0"
                    (click)="onDelivered()">
                    <i class="fas fa-truck me-1 me-sm-2"></i>
                    <span>Mark as Delivered</span>
                  </button>
                </ng-container>

                <!-- After Reject (Show Message) -->
                <div *ngIf="orderStatus === 'rejected'" class="alert alert-danger py-1 mb-0 w-100 text-center">
                  <i class="fas fa-ban me-2"></i>
                  Order has been rejected
                </div>

                <!-- After Delivered (Show Message) -->
                <div *ngIf="orderStatus === 'delivered'" class="alert alert-success py-1 mb-0 w-100 text-center">
                  <i class="fas fa-check-circle me-2"></i>
                  Order has been delivered
                </div>
              </div>

              <!-- Contact Icons - Always in same line -->
              <div class="d-flex flex-nowrap gap-2"  >
                <!-- WhatsApp Icon -->
                <a href="https://wa.me/{{order?.order.ordered_by.phone_number}}"
                  class="btn btn-outline-success rounded-circle p-2 d-flex align-items-center justify-content-center flex-shrink-0"
                  style="width: 38px; height: 38px;" title="WhatsApp Customer">
                  <i class="bi bi-whatsapp"></i>
                </a>

                <!-- Call Icon -->
                <a href="tel:{{order?.order.ordered_by.phone_number}}"
                  class="btn btn-outline-primary rounded-circle p-2 d-flex align-items-center justify-content-center flex-shrink-0"
                  style="width: 38px; height: 38px;" title="Call Customer">
                  <i class="bi bi-telephone-outbound"></i>
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Toast Notification -->
      <div id="statusToast" class="position-fixed top-0 end-0 p-3" style="z-index: 1200; display: none;">
        <div class="toast show" role="alert" aria-live="assertive" aria-atomic="true">
          <div class="toast-header bg-success text-white">
            <strong class="me-auto">Status Updated</strong>
            <button type="button" class="btn-close btn-close-white" onclick="hideToast()"></button>
          </div>
          <div class="toast-body">
            Order status changed successfully
          </div>
        </div>
      </div>
    </div>
  </div>
</div>